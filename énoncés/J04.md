# Jour 4 : Sauvegarde et analyse des logs

Vous allez mettre en place un mécanisme de sauvegarde automatique des répertoires des utilisateurs et créer un script pour analyser les logs système. Ces deux tâches sont essentielles pour assurer la sécurité des données et le bon fonctionnement de l'infrastructure en surveillant les événements critiques.

## Objectifs pédagogiques

- **Appliquer** un script de sauvegarde automatique des répertoires utilisateurs.
- **Comprendre** l'importance de l'analyse des logs système pour la surveillance et la gestion des incidents.
- **Appliquer** un script bash pour extraire et analyser des informations pertinentes à partir des logs système.

## Etapes

1. **Création du script de sauvegarde** :
   - Écrivez un script qui compresse les répertoires `/home/` de chaque utilisateur en un fichier zip, puis stocke les fichiers dans le répertoire `/backup/`.
   - Nommez chaque fichier de sauvegarde avec le nom d'utilisateur et la date du jour (exemple : `backup_user1_2024-10-02.zip`).
   - Assurez-vous que chaque sauvegarde est écrite avec des permissions restreintes pour garantir la sécurité des données.

2. **Analyse des logs** :
   - Créez un second script qui analyse les logs système, en particulier le fichier `/var/log/syslog`.
   - Le script devra identifier et extraire les lignes contenant des erreurs (`error`), des alertes (`alert`), ou des tentatives de connexion échouées (`failed login`).
   - Enregistrez ces informations dans un fichier séparé `~/analyses/warning.log` pour une consultation facile.

3. **Automatisation de la sauvegarde** :
   - Planifiez une tâche cron qui exécute la sauvegarde chaque nuit à 2h00 pour assurer une copie régulière des répertoires utilisateurs.
   - Configurez une seconde tâche cron pour exécuter l’analyse des logs chaque matin à 7h00.

## Bonus

- **Gestion des versions de sauvegarde** : Modifiez le script de sauvegarde pour gérer un système de rotation des sauvegardes (par exemple, conserver seulement les 7 dernières versions pour éviter une surcharge de stockage).
- **Filtrage avancé des logs** : Ajoutez au script d'analyse une fonctionnalité pour détecter les événements critiques supplémentaires, tels que les pannes matérielles ou les services qui ne démarrent pas, et les enregistrer dans un fichier de rapports détaillé.



# Correction j04

